[gd_scene load_steps=12 format=3 uid="uid://dm2xydbi1nfek"]

[ext_resource type="ArrayMesh" uid="uid://cu1dqly0r08gg" path="res://Scripts/kenney_tower-defense-kit/Models/OBJ format/weapon-cannon.obj" id="1_0pj2s"]
[ext_resource type="Script" path="res://Scripts/tower_1.gd" id="1_5wkb3"]
[ext_resource type="Texture2D" uid="uid://bpudnmph6vdpc" path="res://Scripts/kenney_tower-defense-kit/Previews/weapon-cannon.png" id="3_xon4b"]

[sub_resource type="SphereShape3D" id="SphereShape3D_pdps0"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_f6o2i"]
height = 0.001
radius = 0.9

[sub_resource type="CylinderShape3D" id="CylinderShape3D_ijlxx"]
height = 1.2
radius = 4.0

[sub_resource type="ORMMaterial3D" id="ORMMaterial3D_kp8k6"]
albedo_color = Color(0, 0.755799, 0.902163, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_tv2sw"]
material = SubResource("ORMMaterial3D_kp8k6")
top_radius = 2.0
height = 0.01

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_gvocd"]
bg_color = Color(0.252028, 0.252028, 0.252028, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(1, 1, 1, 1)
corner_radius_top_left = 15
corner_radius_top_right = 15
corner_radius_bottom_right = 15
corner_radius_bottom_left = 15

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ou16i"]
bg_color = Color(0.160784, 0.160784, 0.160784, 1)
corner_radius_top_left = 15
corner_radius_top_right = 15
corner_radius_bottom_right = 15
corner_radius_bottom_left = 15

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pphci"]
size = Vector2(432, 558)

[node name="Tower1" type="CharacterBody3D" groups=["NoPlace", "Towergro"]]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, -0.107827, 0)
collision_priority = 4.0
script = ExtResource("1_5wkb3")

[node name="Towermesh" type="MeshInstance3D" parent="."]
transform = Transform3D(-2, 0, -1.74846e-07, 0, 2, 0, 1.74846e-07, 0, -2, 0, 0, 0)
mesh = ExtResource("1_0pj2s")

[node name="Aim" type="Marker3D" parent="Towermesh"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0.382619, 0.267503)

[node name="TowerClick" type="Area3D" parent="Towermesh" groups=["Tower Click", "Towergro"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.430972, 0)
collision_priority = 2.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Towermesh/TowerClick"]
transform = Transform3D(1, 0, 0, 0, 1.3, 0, 0, 0, 1, 0, -0.125222, 0)
shape = SubResource("SphereShape3D_pdps0")

[node name="Tower space" type="CollisionShape3D" parent="." groups=["NoPlace", "Towergro"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.10023, 0)
shape = SubResource("CylinderShape3D_f6o2i")

[node name="Mob Detect" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0622916, 0.064743, -0.0157132)
collision_layer = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Mob Detect"]
transform = Transform3D(1, 0, 0, 0, 4.6662, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("CylinderShape3D_ijlxx")

[node name="Range view" type="MeshInstance3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0.0742012, 0)
transparency = 0.5
mesh = SubResource("CylinderMesh_tv2sw")
skeleton = NodePath("../Towermesh")

[node name="BulletContainer" type="Node" parent="."]

[node name="ShootTimer" type="Timer" parent="."]

[node name="Upg_scre" type="CanvasLayer" parent="."]

[node name="Panel" type="Panel" parent="Upg_scre"]
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -480.0
offset_top = -279.0
offset_right = -48.0
offset_bottom = 279.0
grow_horizontal = 0
grow_vertical = 2
mouse_filter = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_gvocd")

[node name="Tower Name" type="Label" parent="Upg_scre/Panel"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -55.0
offset_top = 16.0
offset_right = 55.0
offset_bottom = 71.0
grow_horizontal = 2
theme_override_font_sizes/font_size = 40
text = "Name"

[node name="Panel" type="Panel" parent="Upg_scre/Panel"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -94.0
offset_top = 80.0
offset_right = 94.0
offset_bottom = 258.0
grow_horizontal = 2
mouse_filter = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_ou16i")

[node name="Weapon-cannon" type="Sprite2D" parent="Upg_scre/Panel/Panel"]
position = Vector2(92.5, 88.5)
scale = Vector2(2.54688, 2.54688)
texture = ExtResource("3_xon4b")

[node name="VBoxContainer" type="VBoxContainer" parent="Upg_scre/Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -126.0
offset_top = 28.5
offset_right = 126.0
offset_bottom = 131.5
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Current_target" type="Label" parent="Upg_scre/Panel/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 30
text = "Temp"

[node name="Target" type="Button" parent="Upg_scre/Panel/VBoxContainer"]
layout_mode = 2
mouse_filter = 1
theme_override_font_sizes/font_size = 35
text = "Change Target"

[node name="VBoxContainer2" type="VBoxContainer" parent="Upg_scre/Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -148.0
offset_top = 147.0
offset_right = -32.0
offset_bottom = 252.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/separation = -5

[node name="Sell_lb" type="Label" parent="Upg_scre/Panel/VBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 28
text = "Sell"

[node name="Sell" type="Button" parent="Upg_scre/Panel/VBoxContainer2"]
layout_mode = 2
mouse_filter = 1
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 42
text = "1"

[node name="VBoxContainer3" type="VBoxContainer" parent="Upg_scre/Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 20.0
offset_top = 143.0
offset_right = 136.0
offset_bottom = 248.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/separation = 0

[node name="Upgrade_lb" type="Label" parent="Upg_scre/Panel/VBoxContainer3"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 28
text = "Upgrade"

[node name="Upgrade" type="Button" parent="Upg_scre/Panel/VBoxContainer3"]
layout_mode = 2
mouse_filter = 1
theme_override_constants/outline_size = 10
theme_override_font_sizes/font_size = 42
text = "$560
"

[node name="tOUCH" type="Area2D" parent="Upg_scre/Panel"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Upg_scre/Panel/tOUCH"]
position = Vector2(216, 279)
shape = SubResource("RectangleShape2D_pphci")

[connection signal="mouse_entered" from="Towermesh/TowerClick" to="." method="_on_tower_click_mouse_entered"]
[connection signal="mouse_exited" from="Towermesh/TowerClick" to="." method="_on_tower_click_mouse_exited"]
[connection signal="body_entered" from="Mob Detect" to="." method="_on_mob_detect_body_entered"]
[connection signal="body_exited" from="Mob Detect" to="." method="_on_mob_detect_body_exited"]
[connection signal="timeout" from="ShootTimer" to="." method="_on_shoot_timer_timeout"]
[connection signal="mouse_entered" from="Upg_scre/Panel" to="." method="_on_panel_mouse_entered"]
[connection signal="mouse_exited" from="Upg_scre/Panel" to="." method="_on_panel_mouse_exited"]
[connection signal="pressed" from="Upg_scre/Panel/VBoxContainer3/Upgrade" to="." method="_on_upgrade_pressed"]
[connection signal="mouse_entered" from="Upg_scre/Panel/tOUCH" to="." method="_on_t_ouch_mouse_entered"]
[connection signal="mouse_exited" from="Upg_scre/Panel/tOUCH" to="." method="_on_t_ouch_mouse_exited"]
